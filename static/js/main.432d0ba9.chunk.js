(this["webpackJsonpdiagnosis-ui"]=this["webpackJsonpdiagnosis-ui"]||[]).push([[0],{53:function(e,t,a){e.exports=a(81)},58:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),i=a.n(o),s=(a(58),a(47)),c=a(18),l=a(10),u=a(46),m=a(109),p=a(4),h=a(110),d=a(84),g=a(108),f=a(25),b=a.n(f),v=a(38),y=a(39),k=a(40),E=a(49),C=a(48),x=a(26),S=a.n(x),w=a(111),O=a(104),j=a(82),M=a(41),P=a.n(M),R=a(105),I=function(e){Object(E.a)(a,e);var t=Object(C.a)(a);function a(e,n){var o;return Object(y.a)(this,a),(o=t.call(this,e,n)).cameraPhoto=null,o.paper={maxWidth:936,margin:"auto",overflow:"hidden"},o.videoRef=r.a.createRef(),o.state={dataUri:"diagnosis.png",isCamStart:!1,predictions:[],progress:!1},o}return Object(k.a)(a,[{key:"componentDidMount",value:function(){this.cameraPhoto=new S.a(this.videoRef.current)}},{key:"startCamera",value:function(e,t){console.log("start Camera"),this.cameraPhoto.startCamera(e,t).then((function(){console.log("camera is started !")})).catch((function(e){console.error("Camera not started!",e)}))}},{key:"startCameraMaxResolution",value:function(e){this.cameraPhoto.startCameraMaxResolution(e).then((function(){console.log("camera is started !")})).catch((function(e){console.error("Camera not started!",e)}))}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"map",value:function(e){var t=[];for(var a in e)t.push({disease:a,prediction:e[a]});return t=t.sort((function(e,t){return e.prediction-t.prediction})).slice(11).reverse()}},{key:"setPrediction",value:function(){var e=Object(v.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"http://127.0.0.1:8000","https://diagnosis-test.herokuapp.com",n=(a=this).map(JSON.parse(t.substr(21,t.length-25))),a.setState((function(e){return Object(l.a)({},e,{predictions:n})})),a.setState((function(e){return Object(l.a)({},e,{progress:!1})}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"takePhoto",value:function(){var e=this,t=this.cameraPhoto.getDataUri({sizeFactor:1});e.setState((function(e){return Object(l.a)({},e,{dataUri:t})})),e.setState((function(e){return Object(l.a)({},e,{progress:!0})})),P.a.post("https://diagnosis-test.herokuapp.com/submit/",{img:t.substr(22)}).then((function(t){e.setPrediction(t.data.jobId)}))}},{key:"stopCamera",value:function(){console.log("stop Camera"),this.cameraPhoto.stopCamera().then((function(){console.log("Camera stoped!")})).catch((function(e){console.log("No camera to stop!:",e)}))}},{key:"onPhotoClick",value:function(){var e=this;if(this.state.isCamStart){var t=!this.state.isCamStart;this.setState((function(e){return Object(l.a)({},e,{isCamStart:t})}),(function(){console.log(e.state.isCamStart)})),this.takePhoto(),this.stopCamera()}else{var a=!this.state.isCamStart;this.setState((function(e){return Object(l.a)({},e,{isCamStart:a})}),(function(){})),this.startCamera(x.FACING_MODES.ENVIRONMENT,{width:320,height:320})}}},{key:"onAnalyse",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(j.a,{className:this.paper},r.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(O.a,{item:!0},r.a.createElement("video",{style:{display:this.state.isCamStart?"":"none"},ref:this.videoRef,autoPlay:!0}),r.a.createElement("img",{alt:"",src:this.state.dataUri,width:"320",height:"320",style:{display:this.state.isCamStart?"none":""}}),this.state.progress&&r.a.createElement(R.a,null))),r.a.createElement(O.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(O.a,{item:!0},r.a.createElement(w.a,{onClick:function(){e.onPhotoClick()},variant:"contained",color:"primary"},this.state.progress?"Analyzing Image...":"Take Photo"))),r.a.createElement(O.a,{container:!0,style:{"margin-top":"10px"},alignItems:"center"},r.a.createElement(O.a,{item:!0},this.state.predictions.length>0&&r.a.createElement("h2",{style:{"margin-left":"7px"}},"Predictions"),this.state.predictions.map((function(e){return r.a.createElement("p",{style:{"margin-left":"10px"}}," ",r.a.createElement("b",null,e.disease+": "),"  ",e.prediction)})))))}}]),a}(r.a.Component);var T=Object(p.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))((function(e){return r.a.createElement(I,null)})),D=a(106),N=a(107);var W=Object(p.a)((function(e){return{secondaryBar:{zIndex:0},menuButton:{marginLeft:-e.spacing(1)},iconButtonAvatar:{padding:4},link:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)","&:hover":{color:e.palette.common.white}},button:{borderColor:"rgba(255, 255, 255, 0.7)"}}}))((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{color:"primary",position:"sticky",elevation:0},r.a.createElement(N.a,null,r.a.createElement("h3",{center:!0},"Open Diagnosis"))))}));function B(){return r.a.createElement(d.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(g.a,{color:"inherit",href:"https://material-ui.com/"},"Open Diagnosis")," ",(new Date).getFullYear(),".")}var z=Object(u.a)({palette:{primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}},typography:{h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},shape:{borderRadius:8},props:{MuiTab:{disableRipple:!0}},mixins:{toolbar:{minHeight:48}}});z=Object(l.a)({},z,{overrides:{MuiDrawer:{paper:{backgroundColor:"#18202c"}},MuiButton:{label:{textTransform:"none"},contained:{boxShadow:"none","&:active":{boxShadow:"none"}}},MuiTabs:{root:{marginLeft:z.spacing(1)},indicator:{height:3,borderTopLeftRadius:3,borderTopRightRadius:3,backgroundColor:z.palette.common.white}},MuiTab:{root:Object(c.a)({textTransform:"none",margin:"0 16px",minWidth:0,padding:0},z.breakpoints.up("md"),{padding:0,minWidth:0})},MuiIconButton:{root:{padding:z.spacing(1)}},MuiTooltip:{tooltip:{borderRadius:4}},MuiDivider:{root:{backgroundColor:"#404854"}},MuiListItemText:{primary:{fontWeight:z.typography.fontWeightMedium}},MuiListItemIcon:{root:{color:"inherit",marginRight:0,"& svg":{fontSize:20}}},MuiAvatar:{root:{width:32,height:32}}}});var A={root:{display:"flex",minHeight:"100vh"},drawer:Object(c.a)({},z.breakpoints.up("sm"),{width:256,flexShrink:0}),app:{flex:1,display:"flex",flexDirection:"column"},main:{flex:1,padding:z.spacing(6,4),background:"#eaeff1"},footer:{padding:z.spacing(2),background:"#eaeff1"}};var L=Object(p.a)(A)((function(e){var t=e.classes,a=r.a.useState(!1),n=Object(s.a)(a,2),o=n[0],i=n[1];return r.a.createElement(m.a,{theme:z},r.a.createElement("div",{className:t.root},r.a.createElement(h.a,null),r.a.createElement("div",{className:t.app},r.a.createElement(W,{onDrawerToggle:function(){i(!o)}}),r.a.createElement("main",{className:t.main},r.a.createElement(T,{predications:"predication jindabad"})),r.a.createElement("footer",{className:t.footer},r.a.createElement(B,null)))))}));var U=function(){return r.a.createElement(L,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.432d0ba9.chunk.js.map