(this["webpackJsonpdiagnosis-ui"]=this["webpackJsonpdiagnosis-ui"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),c=(a(78),a(65)),s=a(27),l=a(19),m=a(63),u=a(154),p=a(5),d=a(155),h=a(157),g=a(29),f=a(153),b=a(66),v=a(4),y=a(147),E=a(156),k=a(144),C=a(158),w=a(145),x=a(146),S=a(59),j=a.n(S),O=[];var P=Object(p.a)((function(e){return{categoryHeader:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},categoryHeaderPrimary:{color:e.palette.common.white},item:{paddingTop:1,paddingBottom:1,color:"rgba(255, 255, 255, 0.7)","&:hover,&:focus":{backgroundColor:"rgba(255, 255, 255, 0.08)"}},itemCategory:{backgroundColor:"#232f3e",boxShadow:"0 -1px 0 #404854 inset",paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},firebase:{fontSize:24,color:e.palette.common.white},itemActiveItem:{color:"#4fc3f7"},itemPrimary:{fontSize:"inherit"},itemIcon:{minWidth:"auto",marginRight:e.spacing(2)},divider:{marginTop:e.spacing(2)}}}))((function(e){var t=e.classes,a=Object(b.a)(e,["classes"]);return r.a.createElement(E.a,Object.assign({variant:"permanent"},a),r.a.createElement(k.a,{disablePadding:!0},r.a.createElement(C.a,{className:Object(v.a)(t.firebase,t.item,t.itemCategory)},"Paperbase"),r.a.createElement(C.a,{className:Object(v.a)(t.item,t.itemCategory)},r.a.createElement(w.a,{className:t.itemIcon},r.a.createElement(j.a,null)),r.a.createElement(x.a,{classes:{primary:t.itemPrimary}},"Project Overview")),O.map((function(e){var a=e.id,n=e.children;return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(C.a,{className:t.categoryHeader},r.a.createElement(x.a,{classes:{primary:t.categoryHeaderPrimary}},a)),n.map((function(e){var a=e.id,n=e.icon,o=e.active;return r.a.createElement(C.a,{key:a,button:!0,className:Object(v.a)(t.item,o&&t.itemActiveItem)},r.a.createElement(w.a,{className:t.itemIcon},n),r.a.createElement(x.a,{classes:{primary:t.itemPrimary}},a))})),r.a.createElement(y.a,{className:t.divider}))}))))})),I=a(39),M=a.n(I),N=a(60),T=a(61),R=a(62),B=a(67),D=a(64),W=a(40),z=a.n(W),A=a(150),H=a(148),U=a(105),F=a(41),L=a.n(F),J=a(149),Y=function(e){Object(B.a)(a,e);var t=Object(D.a)(a);function a(e,n){var o;return Object(T.a)(this,a),(o=t.call(this,e,n)).cameraPhoto=null,o.paper={maxWidth:936,margin:"auto",overflow:"hidden"},o.videoRef=r.a.createRef(),o.state={dataUri:"diagnosis.png",isCamStart:!1,predictions:[],progress:!1},o}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.cameraPhoto=new z.a(this.videoRef.current)}},{key:"startCamera",value:function(e,t){console.log("start Camera"),this.cameraPhoto.startCamera(e,t).then((function(){console.log("camera is started !")})).catch((function(e){console.error("Camera not started!",e)}))}},{key:"startCameraMaxResolution",value:function(e){this.cameraPhoto.startCameraMaxResolution(e).then((function(){console.log("camera is started !")})).catch((function(e){console.error("Camera not started!",e)}))}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"map",value:function(e){var t=[];for(var a in e)t.push("  "+a+": "+e[a]);return t}},{key:"setPrediction",value:function(){var e=Object(N.a)(M.a.mark((function e(t){var a,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="http://127.0.0.1:8000",a="https://diagnosis-test.herokuapp.com",n=this,e.next=5,this.sleep(5e3);case 5:return e.next=7,L.a.get(a+"/status/"+t+"/").then((function(e){var t=n.map(e.data.prediction);n.setState((function(e){return Object(l.a)({},e,{predictions:t})})),n.setState((function(e){return Object(l.a)({},e,{progress:!1})}))}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"takePhoto",value:function(){var e=this,t=this.cameraPhoto.getDataUri({sizeFactor:1});e.setState((function(e){return Object(l.a)({},e,{dataUri:t})})),e.setState((function(e){return Object(l.a)({},e,{progress:!0})})),L.a.post("https://diagnosis-test.herokuapp.com/submit/",{img:t.substr(22)}).then((function(t){e.setPrediction(t.data.jobId)}))}},{key:"stopCamera",value:function(){console.log("stop Camera"),this.cameraPhoto.stopCamera().then((function(){console.log("Camera stoped!")})).catch((function(e){console.log("No camera to stop!:",e)}))}},{key:"onPhotoClick",value:function(){var e=this;if(this.state.isCamStart){var t=!this.state.isCamStart;this.setState((function(e){return Object(l.a)({},e,{isCamStart:t})}),(function(){console.log(e.state.isCamStart)})),this.takePhoto(),this.stopCamera()}else{var a=!this.state.isCamStart;this.setState((function(e){return Object(l.a)({},e,{isCamStart:a})}),(function(){})),this.startCamera(W.FACING_MODES.ENVIRONMENT,{width:320,height:320})}}},{key:"onAnalyse",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(U.a,{className:this.paper},r.a.createElement(H.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(H.a,{item:!0},r.a.createElement("video",{style:{display:this.state.isCamStart?"":"none"},ref:this.videoRef,autoPlay:!0}),r.a.createElement("img",{alt:"",src:this.state.dataUri,width:"320px",height:"235px",style:{display:this.state.isCamStart?"none":""}}),this.state.progress&&r.a.createElement(J.a,null))),r.a.createElement(H.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(H.a,{item:!0},r.a.createElement(A.a,{onClick:function(){e.onPhotoClick()},variant:"contained",color:"primary"},this.state.progress?"Analyzing Image...":"Take Photo"))),r.a.createElement(H.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(H.a,{item:!0},this.state.predictions.length>0&&r.a.createElement("h2",null,"Predictions"),this.state.predictions.map((function(e){return r.a.createElement("p",{p:1,m:1}," ",e)})))))}}]),a}(r.a.Component);var G=Object(p.a)((function(e){return{paper:{maxWidth:936,margin:"auto",overflow:"hidden"},searchBar:{borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},searchInput:{fontSize:e.typography.fontSize},block:{display:"block"},addUser:{marginRight:e.spacing(1)},contentWrapper:{margin:"40px 16px"}}}))((function(e){return r.a.createElement(Y,null)})),V=a(151),$=a(152);var _=Object(p.a)((function(e){return{secondaryBar:{zIndex:0},menuButton:{marginLeft:-e.spacing(1)},iconButtonAvatar:{padding:4},link:{textDecoration:"none",color:"rgba(255, 255, 255, 0.7)","&:hover":{color:e.palette.common.white}},button:{borderColor:"rgba(255, 255, 255, 0.7)"}}}))((function(e){return e.classes,e.onDrawerToggle,r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{color:"primary",position:"sticky",elevation:0},r.a.createElement($.a,null,r.a.createElement("h3",{center:!0},"Open Diagnosis"))))}));function q(){return r.a.createElement(g.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(f.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var K=Object(m.a)({palette:{primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}},typography:{h5:{fontWeight:500,fontSize:26,letterSpacing:.5}},shape:{borderRadius:8},props:{MuiTab:{disableRipple:!0}},mixins:{toolbar:{minHeight:48}}});K=Object(l.a)({},K,{overrides:{MuiDrawer:{paper:{backgroundColor:"#18202c"}},MuiButton:{label:{textTransform:"none"},contained:{boxShadow:"none","&:active":{boxShadow:"none"}}},MuiTabs:{root:{marginLeft:K.spacing(1)},indicator:{height:3,borderTopLeftRadius:3,borderTopRightRadius:3,backgroundColor:K.palette.common.white}},MuiTab:{root:Object(s.a)({textTransform:"none",margin:"0 16px",minWidth:0,padding:0},K.breakpoints.up("md"),{padding:0,minWidth:0})},MuiIconButton:{root:{padding:K.spacing(1)}},MuiTooltip:{tooltip:{borderRadius:4}},MuiDivider:{root:{backgroundColor:"#404854"}},MuiListItemText:{primary:{fontWeight:K.typography.fontWeightMedium}},MuiListItemIcon:{root:{color:"inherit",marginRight:0,"& svg":{fontSize:20}}},MuiAvatar:{root:{width:32,height:32}}}});var Q={root:{display:"flex",minHeight:"100vh"},drawer:Object(s.a)({},K.breakpoints.up("sm"),{width:256,flexShrink:0}),app:{flex:1,display:"flex",flexDirection:"column"},main:{flex:1,padding:K.spacing(6,4),background:"#eaeff1"},footer:{padding:K.spacing(2),background:"#eaeff1"}};var X=Object(p.a)(Q)((function(e){var t=e.classes,a=r.a.useState(!1),n=Object(c.a)(a,2),o=n[0],i=n[1],s=function(){i(!o)};return r.a.createElement(u.a,{theme:K},r.a.createElement("div",{className:t.root},r.a.createElement(d.a,null),r.a.createElement("nav",{className:t.drawer},r.a.createElement(h.a,{smUp:!0,implementation:"js"},r.a.createElement(P,{PaperProps:{style:{width:256}},variant:"temporary",open:o,onClose:s})),r.a.createElement(h.a,{xsDown:!0,implementation:"css"},r.a.createElement(P,{PaperProps:{style:{width:256}}}))),r.a.createElement("div",{className:t.app},r.a.createElement(_,{onDrawerToggle:s}),r.a.createElement("main",{className:t.main},r.a.createElement(G,{predications:"predication jindabad"})),r.a.createElement("footer",{className:t.footer},r.a.createElement(q,null)))))}));var Z=function(){return r.a.createElement(X,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){e.exports=a(103)},78:function(e,t,a){}},[[73,1,2]]]);
//# sourceMappingURL=main.31341ca4.chunk.js.map